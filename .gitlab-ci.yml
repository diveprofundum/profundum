stages:
  - lint
  - test
  - ui
  - perf

variables:
  CARGO_HOME: "$CI_PROJECT_DIR/.cargo"
  GRADLE_USER_HOME: "$CI_PROJECT_DIR/.gradle"

cache:
  key: "$CI_COMMIT_REF_SLUG"
  paths:
    - .cargo
    - .gradle

lint_rust:
  stage: lint
  image: rust:1.76
  script:
    - cargo fmt --check
    - cargo clippy --all-targets --all-features -- -D warnings

unit_test_rust_linux:
  stage: test
  image: rust:1.76
  script:
    - cargo test

ui_test_compose_desktop:
  stage: ui
  image: eclipse-temurin:17
  script:
    - echo "Compose UI tests go here"

ui_test_swiftui_macos:
  stage: ui
  tags:
    - macos
  script:
    - echo "SwiftUI snapshot tests go here"

perf_nightly:
  stage: perf
  image: rust:1.76
  script:
    - echo "Performance benchmarks go here"
  only:
    - schedules
